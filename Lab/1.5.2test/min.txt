(()=>{let e={replacer:function(e){let t="'></span>",n=e.replace("<>","<div>").replace("</>","</div>");return n=(n=n.replaceAll("[-","<span delete='").replaceAll("-]",t)).replaceAll("{{","<span state='").replaceAll("}}",t),n=this.namer(n)},namer(e){let t=e,n=t.split("/>").length-1,o=0;for(;n>o;){let l=t.search("/>")-1,i=0,r="";for(;l-i>=-1;){if("<"==t.charAt(l-i)){let s=(r=r.split("").reverse().join("")).split(" ")[0],c,a=`<${s} ${r.replace(s,"")||""}></${s}>`;t=t.slice(0,l-i)+a+t.slice(l+3,t.length),o++,l="",i=0,r=""}else r+=t.charAt(l-i);i++}}return t},rkg(){let e="",t="abcdefghijklmnoprstuxvyz_".split("");for(var n=0;n<=9;n++)e+=t[Math.floor(24*Math.random())];return e},valueTypeControl:e=>["text","textarea","range","number","file","color","date","datetime-local","email","hidden","image","month","password","search","tel","time","url","week"].includes(e),checkedTypeControl:e=>["radio","checkbox"].includes(e),registeredComponents:new Map},t=e=>{let t=document.createElement("template");return t.innerHTML=e,t.content},n="UPDATE_"+e.rkg(),o=Symbol("PROXY"),l=new Event(n);Object.prototype.loadComponents=function(){e.registeredComponents.forEach((e,t)=>{this.component(t,e)})};let i=e=>"on"==e.slice(0,2),r=(e,t)=>{e.querySelectorAll("*").forEach(e=>{let n=e.getAttributeNames();t&&n.forEach(n=>{n[0]="$";{let o=n.slice(1),l=e.getAttribute(n),r=l.split("("),s=null;r.length>1&&(r[1]=r[1].slice(0,-1),"'"==(s=r[1])[0]||'"'==s[0]||s[0],s=Function(`return ${s}`)()),i(o)&&(e[o]=()=>{t[r[0]??l](s??e)},e[r[0]??l]&&e.removeAttribute(n))}})})},s=(t,n)=>{"string"==typeof t?e.registeredComponents.set(t,n):"function"==typeof t?e.registeredComponents.set(t.name,t):t.length>0&&Array.isArray(t)&&t.forEach(t=>{e.registeredComponents.set(t.name,t)})},c=t=>{if(t.querySelector("style[scoped]")){let n=t.querySelectorAll("style[scoped]");if(n.length){let o=e.rkg();n.forEach(e=>{let t=e.textContent.split("}");t.forEach((e,n)=>{let l="."+o+">"+e;t[n]=l}),e.textContent="",t.forEach((n,o)=>{o!=t.length&&(e.textContent+=n+"}")})}),t.querySelectorAll("*").forEach(e=>{"STYLE"!=e.nodeName&&e.classList.add(o)})}}},a=(i,...s)=>{var a;let f={nodeLists:[],onEffect:null,createEffect:null,onUnmount:null,onMount:null,onSignal:null,active:!0,memo:!1,mounted:!1,rate:30,childComponents:[],key:"__"+e.rkg()+"__",target:null,childUpdates:[],childFor:[]},p=[],d=[...s];i.forEach((e,t)=>{p.push(e),void 0!=d[t]&&p.push(d[t])});let y="";p.forEach(e=>{"string"==typeof e?y+=e:y+='<span class="achrplcelem"></span>'}),y=e.replacer(y,f.key);let g=t(y);1!=g.children.length&&console.warn("Anchors Warn :\nThere must be only one parent element");let b=()=>x.isConnected;c(g);let E=e=>{if(!b()&&f.mounted)N.callback();else if(f.mounted||document.querySelectorAll("."+f.key).length){"function"==typeof f.createEffect&&f.createEffect(),f.childUpdates.length&&f.childUpdates.forEach(e=>e());let t=!1;f.nodeLists.forEach(e=>{let n=e.func();e.before!=n&&(e.node.nodeValue=n,e.before=n,"function"==typeof f.onEffect&&(t=!0),g.dispatchEvent(l))}),t&&f.onEffect(e),f.childComponents.length>0&&"local"!=e&&f.childComponents.forEach(t=>{!1==t.details.memo&&"HTML"!==t.type&&t.effect(e)})}$(e),f.childFor.length&&f.childFor.forEach(e=>e(k))},$=e=>{f.onSignal&&f.mounted&&f.onSignal(e)},A=()=>{!1==f.mounted&&(f.mounted=!0,f.onMount&&f.onMount(),f.active=!0)},v=h(()=>{E()},()=>f.rate),C=h(()=>{E("local")},()=>f.rate);[...s].forEach(e=>{let n=g.querySelector(".achrplcelem");if(e instanceof Promise){let o=document.createElement("div");n.replaceWith(o);let l=async n=>{let l=await e,i=t(l.join(""));r(i,n),u(o,i)};f.childFor.push(e=>{l(e)})}if("object"==typeof e||"number"==typeof e){if(Object.keys(e).length>0){if("For"==e.type)n.replaceWith(e.fragment),f.childFor.push(e.update),e.update();else if(e.content){let i=e;n.replaceWith(i.content),f.childComponents.push(i),i.mount()}else n.replaceWith(e)}else n.replaceWith(e)}else if("function"==typeof e){let s=e(),c=e,a=()=>{let e=document.createElement("div");return n.replaceWith(e),e};if(s instanceof Promise||"AsyncFunction"==e.constructor.name){let h=a(),p=async n=>{let o=await e(),l=t(o.join(""));r(l,n),u(h,l)};f.childFor.push(e=>{p(e)})}else if(Array.isArray(s)){let d=n=>{let o=t(e().join(""));return r(o,n),o},m=a();u(m,d()),f.childFor.push(e=>{u(m,d(e))})}else if("object"==typeof s)s.content?(n.replaceWith(s.content),s.mount&&(f.childComponents.push(s),s.mount())):n.replaceWith(s);else if("number"==typeof s||"string"==typeof s||"boolean"==typeof s){let y=document.createTextNode(s);n.replaceWith(y),f.nodeLists.push({node:y,func:c,before:s})}else if("null"==typeof s||void 0===s){let b=0,E=setInterval(()=>{let t=e();if(t||b>=20){if(clearInterval(E),t){let o=document.createTextNode(t);n.replaceWith(o),f.nodeLists.push({node:o,func:c,before:t})}}else b++},300)}}});let _=e=>{if(e.__SYMBOL__!==o){let t=m(e);return g.registerStore(t),t}g.registerStore(e)},k={},S=e=>{Object.keys(e).forEach(t=>{k[t]=e[t]}),k=new Proxy(k,{get:(e,t)=>(v(),e[t])}),r(g,k)},N={callback:null,remove(){unmountCallback=null},callback(){f.childComponents.length>0&&(f.childComponents.forEach(e=>{e.unmount.callback(),e.details.mounted=!1}),document.dispatchEvent(l)),f.onUnmount&&!0==f.mounted&&f.onUnmount(),f.mounted=!1,f.target=null,f.active=!1}};v(),document.addEventListener(n,()=>v()),g.addEventListener(n,()=>v()),g.loadComponents();let x=g.firstElementChild,T=e=>g.querySelector(e),L=e=>g.querySelectorAll(e),q=()=>g.getElementById(arg),W=()=>{x.classList.toggle(f.key)};return{toggleKey:W,isMounted:b,querySelector:T,querySelectorAll:L,getElementById:q,content:x,details:f,unmount:N,effect:E,signal:$,mount:A,update:v,localUpdate:C,states:_,methods:S}},u=(e,t,n)=>{let o=(e,t)=>e.className!=t.className?e.className=t.className:"";if(!e.isEqualNode(t)){let l=Array.from(e.childNodes),i=l.length,r=Array.from(t.childNodes),s=r.length,c=Math.abs(i-s);if(c){if(i>s){for(;c>0;)e.isEqualNode(t)||e.childNodes[Array.from(e.childNodes).length-1].remove(),c--;u(e,t)}else if(s>i){for(;c>0;)e.isEqualNode(t)||(e.append(r[r.length-1].cloneNode(!0)),r.pop()),c--;u(e,t)}}else l.forEach((e,t)=>{if(!e.isEqualNode(r[t])){if(3==e.nodeType&&3==r[t].nodeType)e.textContent!=r[t].textContent&&(e.nodeValue=r[t].textContent);else if(e.nodeType!=r[t].nodeType)e.replaceWith(r[t].cloneNode(!0));else if(e.nodeName!=r[t].nodeName)e.replaceWith(r[t].cloneNode(!0));else{if(1==e.nodeType&&1==r[t].nodeType){let l=e.getAttributeNames(),i=r[t].getAttributeNames();if(l.length,i.length,i.length==l.length)i.forEach((n,l)=>{"class"!=n?e.getAttribute(n)!=r[t].getAttribute(n)&&"$"!=n[0]&&e.setAttribute(n,r[t].getAttribute(n)):o(e,r[t])});else if(l.length>i.length){let s=l.filter(e=>!i.includes(e));s.length&&s.forEach(t=>{e.removeAttribute(t)});let c=l.filter(e=>i.includes(e));c.length&&c.forEach(n=>{e.getAttribute(n)!=r[t].getAttribute(n)&&("class"!=n?e.setAttribute(n,r[t].getAttribute(n)):o(e,r[t]))}),u(e,r[t])}else if(i.length>l.length){if(!e.isEqualNode(r[t])){let a=i.filter(e=>!l.includes(e));a.length&&a.forEach(n=>{"$"!=n[0]&&e.setAttribute(n,r[t].getAttribute(n))});let f=i.filter(e=>l.includes(e));f&&f.forEach((n,l)=>{e.getAttribute(n)!=r[t].getAttribute(n)&&("class"!=n?e.setAttribute(n,r[t].getAttribute(n)):o(e,r[t]))})}u(e,r[t])}}if(e.isEqualNode(r[t])||u(e,r[t],!0),n)return}}})}},f={registeredRenders:[]};void 0==window.prototyped&&(Object.prototype.selectElement=function(e){let t=this.querySelectorAll(e);return 1==t.length?t[0]:t},Object.defineProperty(Object.prototype,"text",{set:function(e){(Array.isArray(this)||NodeList.prototype.isPrototypeOf(this))&&"object"==typeof this&&this.length>0?this.forEach(t=>{e=e.toString(),3==t.nodeType?t.textContent!=e&&(t.nodeValue=e):t.textContent!=e&&(t.textContent=e)}):(e=e.toString(),3==this.nodeType?this.textContent!=e&&(this.nodeValue=e):this.textContent!=e&&(this.textContent=e))},get:function(){if(this){let e=[];return this.length>1?(this.forEach(t=>{e.push(t.textContent)}),e):this.textContent}console.warn("Anchors :\nInvalid definition")}}),Object.prototype.render=function(e,t){if("object"==typeof e)this.textContent="",this.append(e.content?e.content:e),e.content.loadComponents(),document.querySelectorAll("."+e.details.key).forEach(e=>e.loadComponents()),e.content&&e.mount();else if("function"==typeof e){this.textContent="";let n=e(t);n.content.selectElement("[anchor]").forEach(e=>{e.removeAttribute("anchor")}),this.append(n.content),n.content.loadComponents(),n.details&&"HTML"!==n.type?(n.details.target=this,f.registeredRenders.push({target:this,pages:n}),n.mount()):"HTML"===data.type&&n.mount(),document.querySelectorAll("."+n.details.key).forEach(e=>e.loadComponents()),document.dispatchEvent(l)}},NodeList.prototype.render=function(e,t){this.forEach(n=>{if(n.textContent="","object"==typeof e)e.content&&n?(n.append(e.content),e.details.mounted=!0):n.append(e.cloneNode(!0));else if("function"==typeof e){let o=!1;f.registeredRenders.forEach(e=>e.target[0]==this[0]?o=!0:""),!0==o&&(f.registeredRenders.forEach(e=>{e.target[0]==this[0]&&e.data.unmount.callback()}),f.registeredRenders=f.registeredRenders.filter(e=>e.target[0]!=this[0]));let i=e(t);i.content.loadComponents(),n.append(i.content),i.details&&"HTML"!==i.type?(i.details.target=this,f.registeredRenders.push({target:this,data:i}),i.mount()):"HTML"===i.type&&i.mount(),i.content.querySelectorAll("."+i.details.key).forEach(e=>e.loadComponents()),document.dispatchEvent(l)}})},Object.prototype.createEffect=function(e){this.details.createEffect=e},Object.prototype.slot=function(e){e?this.content.querySelector("slot").replaceWith(e):this.content.querySelectorAll("slot").forEach(e=>e.remove())},Object.prototype.setRate=function(e){function t(){console.warn("Anchors SetRate Error:\nRate Must Be A 'Whole Number 0,1,2....'")}if("number"==typeof e||"string"==typeof e){if(e>-1){let n=parseInt(e);"number"!=typeof n?t():this.details.rate=n}else t()}},Object.prototype.kill=function(){this.unmount.callback(),document.body.querySelectorAll(`.${this.details.key}`).forEach(e=>{e.remove()}),delete this},Object.prototype.onEffect=function(e){"function"==typeof e?this.details.onEffect=e:this.details.onEffect=null},Object.prototype.onUnmount=function(e){"function"==typeof e?this.details.onUnmount=e:this.details.onUnmount=null},Object.prototype.onMount=function(e){"function"==typeof e?this.details.onMount=e:this.details.onMount=null},Object.prototype.onSignal=function(e){"function"==typeof e?this.details.onSignal=e:this.details.onSignal=null},Object.prototype.memo=function(e){!0==e||void 0==e||null==e?this.details.memo=!0:this.details.memo=!1},Object.prototype.component=function(e,t){(this.content??this).querySelectorAll(e).forEach(e=>{let n=e.getAttributeNames(),o={};n.forEach(t=>{o[t]=e.getAttribute(t)});let l=new DocumentFragment,i=[...e.childNodes];i.forEach(e=>{l.append(e)});let r=t(o??void 0,i.length>0?l:void 0);e.replaceWith(r.content?r.content:r),"html"===this.type&&r.mount&&(this.details.childComponents,1)?(this.details.childComponents.push(r),r.mount()):r.mount&&r.mount()})});let h=(e,t)=>{let n;return function(){clearTimeout(n),n=setTimeout(()=>e(),"function"==typeof t?t():t)}};function p(e,t){if(void 0===e)return!1;var n=t.indexOf(".");return n>-1?p(e[t.substring(0,n)],t.substr(n+1)):e}window.prototyped=!0;let d=(t,n,o,l)=>{t.querySelectorAll("[state]").forEach(e=>{let t=e.getAttribute("state").split("("),o=t[0].trim(),i=null;t.length>1&&(t[1]=t[1].slice(0,-1),i=Function(`return ${i=t[1]}`)());let r=o.split("."),s=[r[r.length-1]].join(""),c=()=>p(l,o);function a(){return"function"==typeof c()[s]?c()[s](i):c()[s]}switch(typeof c()[s]){case"number":case"string":let u=document.createTextNode(a());e.replaceWith(u);let f=()=>{let e=a();u.textContent!==e&&(u.nodeValue=e)};n.push({value:s,callback:f,el:u});break;case"function":let h=()=>a(),d=document.createTextNode(h()??"");e.replaceWith(d);let m=()=>{let e=a();d.textContent!==e&&(d.nodeValue=e)};n.push({value:"*",callback:m,el:d});break;case"object":console.warn("Anchors Warn:\nPlease do not use object for 'createStore'")}}),t.querySelectorAll("*").forEach(t=>{t.getAttributeNames().forEach(r=>{if("$"==r[0]&&(o[t.getAttribute(r)],1)){let s=r.slice(1),c=t.getAttribute(r).split("("),a=c[0].trim(),u=null,f=a.split("."),h=[f[f.length-1]].join(""),d=()=>p(l,a);function m(){return"function"==typeof d()[h]?d()[h](u):d()[h]}let y=(e,o,l)=>{n.push({value:l?"*":h,callback:e,el:t}),o&&null!=d()[h]&&void 0!=d()[h]&&t.removeAttribute(r),e()};if(c.length>1&&(c[1]=c[1].slice(0,-1),"'"==(u=c[1])[0]||'"'==u[0]||u[0],u=Function(`return ${u}`)()),i(s))d()[h]&&(t.removeAttribute(r),t[s]=()=>{d()[h](u??t)});else switch(s){case"model":d()[h],t.removeAttribute(r),e.valueTypeControl(t.type)?t.oninput=()=>{d()[h]=t.value}:e.checkedTypeControl(t.type)&&(t.oninput=()=>{d()[h]=t.checked});let g=function(){e.valueTypeControl(t.type)?t.value=d()[h]:e.checkedTypeControl(t.type)&&(t.textContent=d()[h])};y(g);break;case"class":let b=m();void 0!==b&&t.classList.add(b);let E=b,$=function(){let e=m();e&&t.classList.contains(E)?E!=e&&(t.classList.remove(E),t.classList.add(e),E=e):!e&&t.classList.contains(E)?t.classList.remove(E):e&&!t.classList[e]&&(t.classList.add(e),E=e)};y($,!0,"function"==typeof d()[h]);break;case"hide":case"show":{let A=()=>{let e=m();"hide"==s&&e||"show"==s&&!e?t.style.display="none":t.style.display=""};y(A,!0,"function"==typeof l[c[0]])}break;case"visible":case"invisible":{let v=()=>{let e=m();"invisible"==s&&e||"visible"==s&&!e?t.style.visibility="hidden":t.style.visibility="visible"};y(v,!0,"function"==typeof d()[h])}break;case"destroy":{let C=function(){m()&&t.remove()};y(C,!0,"function"==typeof d()[h])}break;default:if("click"==s)console.warn("Anchors Warn:\nPlease use '$onclick' instead of '$click'\n$click event causes infinite loop");else{let _=()=>{t[s]=m()};y(_,!0,"function"==typeof d()[h])}}}})}),"function"==typeof l.computed&&l.computed()},m=e=>{let t=[],n=()=>t=t.filter(e=>e.el),l=()=>{"function"==typeof r.computed&&r.computed()},i=()=>({get:(e,t)=>"object"==typeof e[t]||Array.isArray(e[t])?new Proxy(e[t],i()):e[t],set(e,o,i){let r=Reflect.get(e,o);return r!==i&&(Reflect.set(e,o,i),t.forEach(e=>{(e.value===o||"*"===e.value)&&e.callback()}),l()),n(),!0}}),r=new Proxy(e,i());return r.__SYMBOL__=o,r.__REGISTER__=n=>{d(n,t,e,r)},l(),r};Object.prototype.registerStore=function(e){this.content?e.__REGISTER__(this.content):this&&e.__REGISTER__(this)},window.html=a,window.createStore=m,window.RegisterComponent=s,window.createElement=t})();