(()=>{let e={replacer:function(e){let t="'></span>",n=e.replaceAll("<>","<div>").replaceAll("</>","</div>").replaceAll("[-","<span delete='").replaceAll("-]",t).replaceAll("{{","<span state='").replaceAll("}}",t);return this.namer(n)},namer(e){let t=e,n=t.split("/>").length-1,o=0;for(;n>o;){let l=t.search("/>")-1,i=0,r="";for(;l-i>=-1;){if("<"==t.charAt(l-i)){let s=(r=r.split("").reverse().join("")).split(" ")[0],c,a=`<${s} ${r.replace(s,"")||""}></${s}>`;t=t.slice(0,l-i)+a+t.slice(l+3,t.length),o++,l="",i=0,r=""}else r+=t.charAt(l-i);i++}}return t},rkg(){let e="";for(var t=0;t<=9;t++)e+="abcdefghijklmnoprstuxvyz_".split("")[Math.floor(24*Math.random())];return e},valueTypeControl:e=>["text","textarea","range","number","file","color","date","datetime-local","email","hidden","image","month","password","search","tel","time","url","week"].includes(e),checkedTypeControl:e=>["radio","checkbox"].includes(e),registeredComponents:new Map},t=e=>{let t=document.createElement("template");return t.innerHTML=e,t.content},n="UPDATE_"+e.rkg(),o=Symbol("PROXY"),l=new Event(n);Object.prototype.loadComponents=function(){e.registeredComponents.forEach((e,t)=>{this.component(t,e)})};let i=e=>{Function(`return ${e}`)()},r=e=>"on"==e.slice(0,2),s=(e,t)=>{e.querySelectorAll("*").forEach(e=>{let n=e.getAttributeNames();t&&n.forEach(n=>{n[0]="$";{let o=n.slice(1),l=e.getAttribute(n),s=l.split("("),c=null;s.length>1&&(s[1]=s[1].slice(0,-1),"'"==(c=s[1])[0]||'"'==c[0]||c[0],c=i(c)),r(o)&&(e[o]=()=>{t[s[0]??l](c??e)},e[s[0]??l]&&e.removeAttribute(n))}})})},c=(t,n)=>{"string"==typeof t?e.registeredComponents.set(t,n):"function"==typeof t?e.registeredComponents.set(t.name,t):t.length>0&&Array.isArray(t)&&t.forEach(t=>{e.registeredComponents.set(t.name,t)})},a=t=>{if(t.querySelector("style[scoped]")){let n=t.querySelectorAll("style[scoped]");if(n.length){let o=e.rkg();n.forEach(e=>{let t=e.textContent.split("}");t.forEach((e,n)=>{let l="."+o+">"+e;t[n]=l}),e.textContent="",t.forEach((n,o)=>{o!=t.length&&(e.textContent+=n+"}")})}),t.querySelectorAll("*").forEach(e=>{"STYLE"!=e.nodeName&&e.classList.add(o)})}}},u=(i,...r)=>{var c;let u={nodeLists:[],onEffect:null,createEffect:null,onUnmount:null,onMount:null,onSignal:null,active:!0,memo:!1,mounted:!1,rate:30,childComponents:[],key:"__"+e.rkg()+"__",target:null,childUpdates:[],childFor:[]},h=[],d=[...r];i.forEach((e,t)=>{h.push(e),void 0!=d[t]&&h.push(d[t])});let m="";h.forEach(e=>{"string"==typeof e?m+=e:m+='<span class="achrplcelem"></span>'}),m=e.replacer(m,u.key);let g=t(m);1!=g.children.length&&console.warn("Anchors Warn :\nThere must be only one parent element"),a(g);let E=e=>{if(!N.isConnected&&u.mounted)S.callback();else if(u.mounted||document.querySelectorAll("."+u.key).length){"function"==typeof u.createEffect&&u.createEffect(),u.childUpdates.length&&u.childUpdates.forEach(e=>e());let t=!1;u.nodeLists.forEach(e=>{let n=e.func();e.before!=n&&(e.node.nodeValue=n,e.before=n,"function"==typeof u.onEffect&&(t=!0),g.dispatchEvent(l))}),t&&u.onEffect(e),u.childComponents.length>0&&"local"!=e&&u.childComponents.forEach(t=>{!1==t.details.memo&&t.effect(e)})}b(e),u.childFor.length&&u.childFor.forEach(e=>e(_))},b=e=>{u.onSignal&&u.mounted&&u.onSignal(e)},$=()=>{!1==u.mounted&&(u.mounted=!0,u.onMount&&u.onMount(),u.active=!0)},A=p(()=>{E()},()=>u.rate),v=p(()=>{E("local")},()=>u.rate);[...r].forEach(e=>{let n=g.querySelector(".achrplcelem");if(e instanceof Promise){let o=document.createElement("div");n.replaceWith(o);let l=async n=>{let l=await e,i=t(l.join(""));s(i,n),f(o,i)};u.childFor.push(e=>{l(e)})}if("object"==typeof e||"number"==typeof e){if(Object.keys(e).length>0){if(e.content){let i=e;n.replaceWith(i.content),u.childComponents.push(i),i.mount()}else n.replaceWith(e)}else n.replaceWith(e)}else if("function"==typeof e){let r=e(),c=e,a=()=>{let e=document.createElement("div");return n.replaceWith(e),e};if(r instanceof Promise||"AsyncFunction"==e.constructor.name){let h=a(),p=async n=>{let o=await e(),l=t(o.join(""));s(l,n),f(h,l)};u.childFor.push(e=>{p(e)})}else if(Array.isArray(r)){let d=n=>{let o=t(e().join(""));return s(o,n),o},m=a();f(m,d()),u.childFor.push(e=>{f(m,d(e))})}else if("object"==typeof r)r.content?(n.replaceWith(r.content),r.mount&&(u.childComponents.push(r),r.mount())):n.replaceWith(r);else if("number"==typeof r||"string"==typeof r||"boolean"==typeof r){let y=document.createTextNode(r);n.replaceWith(y),u.nodeLists.push({node:y,func:c,before:r})}else if("null"==typeof r||void 0===r){let E=0,b=setInterval(()=>{let t=e();if(t||E>=20){if(clearInterval(b),t){let o=document.createTextNode(t);n.replaceWith(o),u.nodeLists.push({node:o,func:c,before:t})}}else E++},300)}}});let C=e=>{if(e.__SYMBOL__!==o){let t=y(e);return g.registerStore(t),t}g.registerStore(e)},_={},k=e=>{Object.keys(e).forEach(t=>{_[t]=e[t]}),_=new Proxy(_,{get:(e,t)=>(A(),e[t])}),s(g,_)},S={callback:null,remove(){unmountCallback=null},callback(){u.childComponents.length>0&&(u.childComponents.forEach(e=>{e.unmount.callback(),e.details.mounted=!1}),document.dispatchEvent(l)),u.onUnmount&&!0==u.mounted&&u.onUnmount(),u.mounted=!1,u.target=null,u.active=!1}};A(),document.addEventListener(n,()=>A()),g.addEventListener(n,()=>A()),g.loadComponents();let N=g.firstElementChild,x=e=>g.querySelector(e),T=e=>g.querySelectorAll(e),q=e=>g.getElementById(e),L=()=>{N.classList.toggle(u.key)};return{toggleKey:L,querySelector:x,querySelectorAll:T,getElementById:q,content:N,details:u,unmount:S,effect:E,signal:b,mount:$,update:A,localUpdate:v,states:C,methods:k}},f=(e,t,n)=>{let o=(e,t)=>e.className!=t.className?e.className=t.className:"";if(!e.isEqualNode(t)){let l=Array.from(e.childNodes),i=l.length,r=Array.from(t.childNodes),s=r.length,c=Math.abs(i-s);if(c){if(i>s){for(;c>0;)e.isEqualNode(t)||e.childNodes[Array.from(e.childNodes).length-1].remove(),c--;f(e,t)}else if(s>i){for(;c>0;)e.isEqualNode(t)||(e.append(r[r.length-1].cloneNode(!0)),r.pop()),c--;f(e,t)}}else l.forEach((e,t)=>{if(!e.isEqualNode(r[t])){if(3==e.nodeType&&3==r[t].nodeType)e.textContent!=r[t].textContent&&(e.nodeValue=r[t].textContent);else if(e.nodeType!=r[t].nodeType)e.replaceWith(r[t].cloneNode(!0));else if(e.nodeName!=r[t].nodeName)e.replaceWith(r[t].cloneNode(!0));else{if(1==e.nodeType&&1==r[t].nodeType){let l=e.getAttributeNames(),i=r[t].getAttributeNames();if(l.length,i.length,i.length==l.length)i.forEach((n,l)=>{"class"!=n?e.getAttribute(n)!=r[t].getAttribute(n)&&"$"!=n[0]&&e.setAttribute(n,r[t].getAttribute(n)):o(e,r[t])});else if(l.length>i.length){let s=l.filter(e=>!i.includes(e));s.length&&s.forEach(t=>{e.removeAttribute(t)});let c=l.filter(e=>i.includes(e));c.length&&c.forEach(n=>{e.getAttribute(n)!=r[t].getAttribute(n)&&("class"!=n?e.setAttribute(n,r[t].getAttribute(n)):o(e,r[t]))}),f(e,r[t])}else if(i.length>l.length){if(!e.isEqualNode(r[t])){let a=i.filter(e=>!l.includes(e));a.length&&a.forEach(n=>{"$"!=n[0]&&e.setAttribute(n,r[t].getAttribute(n))});let u=i.filter(e=>l.includes(e));u&&u.forEach((n,l)=>{e.getAttribute(n)!=r[t].getAttribute(n)&&("class"!=n?e.setAttribute(n,r[t].getAttribute(n)):o(e,r[t]))})}f(e,r[t])}}if(e.isEqualNode(r[t])||f(e,r[t],!0),n)return}}})}},h={registeredRenders:[]};void 0==window.prototyped&&(Object.prototype.selectElement=function(e){let t=this.querySelectorAll(e);return 1==t.length?t[0]:t},Object.defineProperty(Object.prototype,"text",{set:function(e){(Array.isArray(this)||NodeList.prototype.isPrototypeOf(this))&&"object"==typeof this&&this.length>0?this.forEach(t=>{e=e.toString(),3==t.nodeType?t.textContent!=e&&(t.nodeValue=e):t.textContent!=e&&(t.textContent=e)}):(e=e.toString(),3==this.nodeType?this.textContent!=e&&(this.nodeValue=e):this.textContent!=e&&(this.textContent=e))},get:function(){if(this){let e=[];return this.length>1?(this.forEach(t=>{e.push(t.textContent)}),e):this.textContent}console.warn("Anchors :\nInvalid definition")}}),Object.prototype.render=function(e,t){if("object"==typeof e)this.textContent="",this.append(e.content?e.content:e),e.content.loadComponents(),document.querySelectorAll("."+e.details.key).forEach(e=>e.loadComponents()),e.content&&e.mount();else if("function"==typeof e){this.textContent="";let n=e(t);n.content.selectElement("[anchor]").forEach(e=>{e.removeAttribute("anchor")}),this.append(n.content),n.content.loadComponents(),n.details&&(n.details.target=this,h.registeredRenders.push({target:this,pages:n}),n.mount()),document.querySelectorAll("."+n.details.key).forEach(e=>e.loadComponents()),document.dispatchEvent(l)}},NodeList.prototype.render=function(e,t){this.forEach(n=>{if(n.textContent="","object"==typeof e)e.content&&n?(n.append(e.content),e.details.mounted=!0):n.append(e.cloneNode(!0));else if("function"==typeof e){let o=!1;h.registeredRenders.forEach(e=>e.target[0]==this[0]?o=!0:""),!0==o&&(h.registeredRenders.forEach(e=>{e.target[0]==this[0]&&e.data.unmount.callback()}),h.registeredRenders=h.registeredRenders.filter(e=>e.target[0]!=this[0]));let i=e(t);i.content.loadComponents(),n.append(i.content),i.details&&(i.details.target=this,h.registeredRenders.push({target:this,data:i}),i.mount()),i.content.querySelectorAll("."+i.details.key).forEach(e=>e.loadComponents()),document.dispatchEvent(l)}})},Object.prototype.createEffect=function(e){this.details.createEffect=e},Object.prototype.slot=function(e){e?this.content.querySelector("slot").replaceWith(e):this.content.querySelectorAll("slot").forEach(e=>e.remove())},Object.prototype.setRate=function(e){function t(){console.warn("Anchors SetRate Error:\nRate Must Be A 'Whole Number 0,1,2....'")}if("number"==typeof e||"string"==typeof e){if(e>-1){let n=parseInt(e);"number"!=typeof n?t():this.details.rate=n}else t()}},Object.prototype.onEffect=function(e){"function"==typeof e?this.details.onEffect=e:this.details.onEffect=null},Object.prototype.onUnmount=function(e){"function"==typeof e?this.details.onUnmount=e:this.details.onUnmount=null},Object.prototype.onMount=function(e){"function"==typeof e?this.details.onMount=e:this.details.onMount=null},Object.prototype.onSignal=function(e){"function"==typeof e?this.details.onSignal=e:this.details.onSignal=null},Object.prototype.memo=function(e){!0==e||void 0==e||null==e?this.details.memo=!0:this.details.memo=!1},Object.prototype.component=function(e,t){(this.content??this).querySelectorAll(e).forEach(e=>{let n=e.getAttributeNames(),o={};n.forEach(t=>{o[t]=e.getAttribute(t)});let l=new DocumentFragment,i=[...e.childNodes];i.forEach(e=>{l.append(e)});let r=t(o??void 0,i.length>0?l:void 0);e.replaceWith(r.content?r.content:r),"html"===this.type&&r.mount&&(this.details.childComponents,1)?(this.details.childComponents.push(r),r.mount()):r.mount&&r.mount()})});let p=(e,t)=>{let n;return function(){clearTimeout(n),n=setTimeout(()=>e(),"function"==typeof t?t():t)}};function d(e,t){if(void 0===e)return!1;var n=t.indexOf(".");return n>-1?d(e[t.substring(0,n)],t.substr(n+1)):e}window.prototyped=!0;let m=(t,n,o,l)=>{t.querySelectorAll("[state]").forEach(e=>{let t=e.getAttribute("state").split("("),o=t[0].trim(),i=null;t.length>1&&(t[1]=t[1].slice(0,-1),i=Function(`return ${i=t[1]}`)());let r=o.split("."),s=[r[r.length-1]].join(""),c=()=>d(l,o);function a(){return"function"==typeof c()[s]?c()[s](i):c()[s]}switch(typeof c()[s]){case"number":case"string":let u=document.createTextNode(a());e.replaceWith(u);let f=()=>{let e=a();u.textContent!==e&&(u.nodeValue=e)};n.push({value:s,callback:f,el:u});break;case"function":let h=()=>a(),p=document.createTextNode(h()??"");e.replaceWith(p);let m=()=>{let e=a();p.textContent!==e&&(p.nodeValue=e)};n.push({value:"*",callback:m,el:p});break;case"object":console.warn("Anchors Warn:\nPlease do not use object for 'createStore'")}}),t.querySelectorAll("*").forEach(t=>{t.getAttributeNames().forEach(s=>{if("$"==s[0]&&(o[t.getAttribute(s)],1)){let c=s.slice(1),a=t.getAttribute(s).split("("),u=a[0].trim(),f=null,h=u.split("."),p=[h[h.length-1]].join(""),m=()=>d(l,u);function y(){return"function"==typeof m()[p]?m()[p](f):m()[p]}let g=(e,o,l)=>{n.push({value:l?"*":p,callback:e,el:t}),o&&null!=m()[p]&&void 0!=m()[p]&&t.removeAttribute(s),e()};if(a.length>1&&(a[1]=a[1].slice(0,-1),"'"==(f=a[1])[0]||'"'==f[0]||f[0],f=i(f)),r(c))m()[p]&&(t.removeAttribute(s),t[c]=()=>{m()[p](f??t)});else switch(c){case"model":m()[p],t.removeAttribute(s),e.valueTypeControl(t.type)?t.oninput=()=>{m()[p]=t.value}:e.checkedTypeControl(t.type)&&(t.oninput=()=>{m()[p]=t.checked});let E=function(){e.valueTypeControl(t.type)?t.value=m()[p]:e.checkedTypeControl(t.type)&&(t.textContent=m()[p])};g(E);break;case"class":let b=y();void 0!==b&&t.classList.add(b);let $=b,A=function(){let e=y();e&&t.classList.contains($)?$!=e&&(t.classList.remove($),t.classList.add(e),$=e):!e&&t.classList.contains($)?t.classList.remove($):e&&!t.classList[e]&&(t.classList.add(e),$=e)};g(A,!0,"function"==typeof m()[p]);break;case"hide":case"show":{let v=()=>{let e=y();"hide"==c&&e||"show"==c&&!e?t.style.display="none":t.style.display=""};g(v,!0,"function"==typeof l[a[0]])}break;case"visible":case"invisible":{let C=()=>{let e=y();"invisible"==c&&e||"visible"==c&&!e?t.style.visibility="hidden":t.style.visibility="visible"};g(C,!0,"function"==typeof m()[p])}break;case"destroy":{let _=function(){y()&&t.remove()};g(_,!0,"function"==typeof m()[p])}break;default:if("click"==c)console.warn("Anchors Warn:\nPlease use '$onclick' instead of '$click'\n$click event causes infinite loop");else{let k=()=>{t[c]=y()};g(k,!0,"function"==typeof m()[p])}}}})}),"function"==typeof l.computed&&l.computed()},y=e=>{let t=[],n=()=>t=t.filter(e=>e.el),l=()=>{"function"==typeof r.computed&&r.computed()},i=()=>({get:(e,t)=>"object"==typeof e[t]||Array.isArray(e[t])?new Proxy(e[t],i()):e[t],set(e,o,i){let r=Reflect.get(e,o);return r!==i&&(Reflect.set(e,o,i),t.forEach(e=>{(e.value===o||"*"===e.value)&&e.callback()}),l()),n(),!0}}),r=new Proxy(e,i());return r.__SYMBOL__=o,r.__REGISTER__=n=>{m(n,t,e,r)},l(),r};Object.prototype.registerStore=function(e){this.content?e.__REGISTER__(this.content):this&&e.__REGISTER__(this)},window.html=u,window.createStore=y,window.RegisterComponent=c,window.createElement=t})();